--- a/.github/workflows/ci-cd.yml
+++ b/.github/workflows/ci-cd.yml
@@ -94,6 +94,10 @@ jobs:
   security-scan:
     name: Security Scan
     runs-on: ubuntu-latest
+    permissions:
+      contents: read
+      security-events: write
+      actions: read
     
     steps:
       - name: Checkout code
@@ -132,7 +136,9 @@ jobs:
   docker-build:
     name: Build Docker Images
     runs-on: ubuntu-latest
     needs: [test]
-    if: always() && needs.test.result == 'success'
+    if: github.event_name == 'push' && github.ref == 'refs/heads/main'
+    permissions:
+      contents: read
+      packages: write
     
     steps:
       - name: Checkout code
@@ -143,7 +149,7 @@ jobs:
         uses: docker/setup-buildx-action@v2
       
       - name: Login to Docker Hub
-        if: github.event_name != 'pull_request'
+        if: github.event_name != 'pull_request' && secrets.DOCKER_USERNAME != ''
         uses: docker/login-action@v2
         with:
           username: ${{ secrets.DOCKER_USERNAME }}
@@ -151,11 +157,10 @@ jobs:
       
       - name: Build and push backend image
-        if: ${{ github.event_name != 'pull_request' }}
-        continue-on-error: true
         uses: docker/build-push-action@v4
         with:
           context: .
           file: ./Dockerfile
-          push: ${{ github.event_name != 'pull_request' }}
+          push: ${{ github.event_name != 'pull_request' && secrets.DOCKER_USERNAME != '' }}
           tags: |
             ${{ secrets.DOCKER_USERNAME }}/dlnk-backend:latest
             ${{ secrets.DOCKER_USERNAME }}/dlnk-backend:${{ github.sha }}
@@ -164,11 +169,10 @@ jobs:
       
       - name: Build and push frontend image
-        if: ${{ github.event_name != 'pull_request' }}
-        continue-on-error: true
         uses: docker/build-push-action@v4
         with:
           context: ./frontend
           file: ./frontend/Dockerfile
-          push: ${{ github.event_name != 'pull_request' }}
+          push: ${{ github.event_name != 'pull_request' && secrets.DOCKER_USERNAME != '' }}
           tags: |
             ${{ secrets.DOCKER_USERNAME }}/dlnk-frontend:latest
             ${{ secrets.DOCKER_USERNAME }}/dlnk-frontend:${{ github.sha }}

